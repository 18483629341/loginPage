<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="x-ua-compatible" content="IE=edge">
	<title>登录</title>
	<link rel="stylesheet" type="text/css" href="css/login.css" />
	<script src="js/jquery-1.8.3.min.js" type="text/javascript" charset="utf-8"></script>
</head>

<body class="flexBlock">
	<div class="header ">
		<div class="headerMain  ">
			<img src="./img/logo.png" alt="">
		</div>

	</div>
	<!-- 登录框 -->

	<div class="main  ">
		<div class="centerCon flexBlock">
			<div class="flex1 ">
				<div class="themeBox"></div>
			</div>
			<div class="login_content ">
				<div class="login_area">
					<div class="login_name">
						<span class="login_title">账户登录</span>
					</div>
					<div class="userDiv">
						<p class="inputP user ">
							<input type="text" id="userName" name="userName" placeholder="请输入手机号/邮箱" />
						</p>
						<p class="helpBolck "></p>
					</div>
					<div class="passwordDiv">
						<p class="inputP password">
							<input type="text" id="password" name="password" placeholder="请输入密码" />
						</p>
						<p class="helpBolck"></p>
					</div>
					<div class="radioDiv">
						<p class=" checkboxP">
							<span class="checkBox" ></span>
							<span class="remeberPass"> 记住密码</span>
						</p>
					</div>
					<div class="login-btn">
						<button class="login" id="login">登录</button>
					</div>
					
				</div>
				<div class="suggestDiv">建议IE10+/chrome/firefox/360极速浏览器</div> 

			</div>
		</div>


	</div>
	<div class="footer ">
		<p class="footerText">技术支持：北京思路创新科技信息有限公司</p>
	</div>
	<script type="text/javascript">
		//前端验证
		let postObj={
			user:"",
			password:"",
			isSave:true
		}
		$('body').on('click','.login',function () {
			var flag=valid();
            if(flag){//如果flag为true，则发送信息
			   console.log('验证通过',postObj);
               // $.post('url',{info:postObj},function(data){//！！！！！这里需要后台添加
				//})
			}
		})
		function valid(){//格式验证，以及获取输入框信息

		        /*   获取输入框信息   */
				let user=trim($('input[name="userName"]').val())||null;
				let password=trim($('input[name="password"]').val())||null;
				let isSave=$('.checkBox').hasClass('active');
				let userFlag=true;//表示用户名的前端验证是否通过
				let passFlag=true;//表示密码的前端验证是否通过
				console.log('是否为邮箱：'+isEmail(user),'是否为电话号码：'+isPhone(user));
				/*   前端验证用户名   */
				if(!user){
					$('.user').addClass('error');
					$('.user').siblings('.helpBolck').addClass('error');
					$('.user').siblings('.helpBolck').html('输入的手机号码/邮箱不能为空哦！');
					userFlag= false;
				}else if(!isEmail(user)&&!isPhone(user)){//当两个验证都没有通过时，报错；
					$('.user').addClass('error');
					$('.user').siblings('.helpBolck').addClass('error');
					$('.user').siblings('.helpBolck').html('请输入正确的手机号码/邮箱！');
					userFlag= false;
				}else{
					$('.user').removeClass('error');
					$('.user').siblings('.helpBolck').removeClass('error');
					userFlag=true;
					postObj.user=user;
				}

                /*   前端验证密码   */
				if(!password){
					$('.password').addClass('error');
					$('.password').siblings('.helpBolck').addClass('error');
					$('.password').siblings('.helpBolck').html('输入的密码不能为空哦！');
					passFlag=false;
				}else{
					$('.password').removeClass('error');
					$('.password').siblings('.helpBolck').removeClass('error');
					passFlag=true;
					postObj.password=password;
				}
				postObj.isSave=isSave;
				console.log(userFlag,passFlag);
				return (userFlag&&passFlag);
			}
		$('body').on('click','.checkBox',function () {
           $(this).toggleClass('active');
		})
		$('body').on('focus','input',function () {
           $(this).removeClass('error');
		   $(this).parent('.inputP').siblings('.helpBolck').removeClass('error');
		})
		/** 去除首尾的空格 **/
		function trim(str) {
			return str.replace(/^[' '||' ']*/i, '').replace(/[' '||'  ']$/i, ''); //去除首尾的空格
		}
		/** 判断是否为邮箱地址 **/

		function isEmail(emailStr) {
			var reg = /^[a-zA-Z0-9]+([._-]*[a-zA-Z0-9]*)*@[a-zA-Z0-9]+.[a-zA-Z0-9]{2,5}$/;
			return reg.test(emailStr);
		}
		//isEmail('714402934@qq.com')

		/** 判断是否为手机 **/

		function isPhone(phone) {
			var reg = /^1\d{10}$/;
			return reg.test(phone);
		}
		//isPhone(18483629341);
	</script>
</body>

</html>